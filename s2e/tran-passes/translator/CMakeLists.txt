add_definitions(-std=c++11 -g -I/usr/include/c++/4.8)

add_llvm_loadable_module( translator
    AddAttributes.cpp
    AddCustomHelperVars.cpp
    AddDebug.cpp
    AddMemArray.cpp
    CloneModule.cpp
    ConstantLoads.cpp
    CountBlocks.cpp
    CountEdges.cpp
    CountInsts.cpp
    CountPcInsts.cpp
    CustomLoopUnroll.cpp
    CyclomaticComplexity.cpp
    DebugUtils.cpp
    DecomposeEnv.cpp
    DetectVars.cpp
    DotMergedBlocks.cpp
    DotOverlaps.cpp
    ELFPLTFuns.cpp
    ELFSections.cpp 
    ELFSymbols.cpp
    EnvAliasAnalysis.cpp
    EnvToAllocas.cpp
    ExternalizeFunctions.cpp
    ExternPLT.cpp
    FixCFG.cpp
    FixCFGAndBackUpRemovingUnnecessarySuccsFromLibBBs.cpp
    FixCFGWithoutFuncData.cpp
    FixOverlaps.cpp
    HaltOnDeclarations.cpp
    ImplementLibCallStubs.cpp
    ImplementLibCallsNewPLT.cpp
    InlineLibCallArgs.cpp
    InlineStubs.cpp
    InlineWrapper.cpp
    InsertTrampForRecFuncs.cpp
    InstrumentInterpreter.cpp
    InternalizeDebugHelpers.cpp
    InternalizeFunctions.cpp
    InternalizeGlobals.cpp
    InternalizeImports.cpp
    IntrinsicCleaner.cpp
    LibCallNewPLT.cpp
    MainUtils.cpp 
    MergeFunctions.cpp
    MetaUtils.cpp
    MyDotCfg.cpp
    PassUtils.cpp
    PcJumps.cpp
    PcUtils.cpp
    PEMain.cpp
    PEReader.cpp
    PESections.cpp 
    PruneLibargsPush.cpp
    PruneNullSuccs.cpp
    PruneRetaddrPush.cpp
    PruneTriviallyDeadSuccs.cpp
    RecovFuncTrampolines.cpp
    RemoveBlocks.cpp
    RemoveCallsToException.cpp 
    RemoveLibcStart.cpp
    RemoveMemArray.cpp
    RemoveMetadata.cpp
    RemoveQemuHelpers.cpp
    RemoveSections.cpp
    RenameBlockFuncs.cpp
    RenameEnv.cpp
    ReplaceDynamicSymbols.cpp
    ReplaceLocalFunctionPointers.cpp
    ReplaceStackVars.cpp
    SectionUtils.cpp 
    SegfaultDebug.cpp
    SetDataLayout32.cpp
    SimplifyStackOffsets.cpp
    SuccessorLists.cpp
    TagInstPc.cpp
    UnaliasGlobals.cpp
    UnalignStack.cpp
    UnflattenEnv.cpp
    UnimplementCustomHelpers.cpp
    UntangleInterpreter.cpp
  
    DEPENDS
    intrinsics_gen
)


set_target_properties(translator PROPERTIES LINK_FLAGS -lbfd)
